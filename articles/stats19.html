<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="stats19">
<title>Introducing stats19 • stats19</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introducing stats19">
<meta property="og:description" content="stats19">
<meta property="og:image" content="https://docs.ropensci.org/stats19/logo.svg">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">stats19</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.0.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="active nav-item">
  <a class="nav-link" href="../articles/stats19.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/blog.html">stats19: a package for road safety research</a>
    <a class="dropdown-item" href="../articles/stats19-training-setup.html">An introduction to road safety analysis with R: setup notes</a>
    <a class="dropdown-item" href="../articles/stats19-training.html">Introduction to R for road safety: an introduction to R and practical exercises</a>
    <a class="dropdown-item" href="../articles/stats19-vehicles.html">Researching vehicles involved in collisions with STATS19 data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/stats19/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Introducing stats19</h1>
                        <h4 data-toc-skip class="author">R Lovelace, M Morgan, L Hama and M Padgham</h4>
            
            <h4 data-toc-skip class="date">2024-03-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/stats19/blob/HEAD/vignettes/stats19.Rmd" class="external-link"><code>vignettes/stats19.Rmd</code></a></small>
      <div class="d-none name"><code>stats19.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><strong>stats19</strong> enables access to and processing of Great Britain’s official road traffic casualty database, <a href="https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data" class="external-link">STATS19</a>. A description of variables in the database can be found in a <a href="https://data.dft.gov.uk/road-accidents-safety-data/Brief-guide-to%20road-accidents-and-safety-data.doc" class="external-link">document</a> provided by the UK’s Department for Transport (DfT). The datasets are collectively called STATS19 after the form used to report them, which can be found <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/995422/stats19.pdf" class="external-link">here</a>. This vignette focuses on how to use the <strong>stats19</strong> package to work with STATS19 data.</p>
<p><strong>Note</strong>: The Department for Transport used to refer to ‘accidents’, but “crashes” may be a more appropriate term, as emphasised in the “crash not accident” arguments of road safety advocacy groups such as <a href="https://www.roadpeace.org/get-involved/crash-not-accident/" class="external-link">RoadPeace</a>. We use the term collision only in reference to nomenclature within the data as provided.</p>
<p>The development version is hosted on <a href="https://github.com/ITSLeeds/stats19" class="external-link">GitHub</a> and can be installed and loaded as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"stats19"</span><span class="op">)</span></span>
<span><span class="co"># you can install the latest development (discoraged) using:</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ITSLeeds/stats19"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/stats19">stats19</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Data provided under OGL v3.0. Cite the source and link to:</span></span>
<span><span class="co">#&gt; www.nationalarchives.gov.uk/doc/open-government-licence/version/3/</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<p>The easiest way to get STATS19 data is with <code><a href="../reference/get_stats19.html">get_stats19()</a></code>. This function takes 2 main arguments, <code>year</code> and <code>type</code>. The year can be any year between 1979 and 202x where x is the current year minus one or two due to the delay in publishing STATS19 statistics. The type can be one of <code>accidents</code>, <code>casualties</code> and <code>vehicles</code>, described below. <code><a href="../reference/get_stats19.html">get_stats19()</a></code> performs 3 jobs, corresponding to three main types of functions:</p>
<ul>
<li><p><strong>Download</strong>: A <code><a href="../reference/dl_stats19.html">dl_stats19()</a></code> function accepts <code>year</code>, <code>type</code> and <code>filename</code> arguments to make it easy to find the right file to download only.</p></li>
<li>
<p><strong>Read</strong>: STATS19 data is provided in a particular format that benefits from being read-in with pre-specified column types. This is taken care of with <code>read_*()</code> functions providing access to the 3 main tables in STATS19 data:</p>
<ul>
<li>
<code><a href="../reference/read_collisions.html">read_collisions()</a></code> reads-in the crash data (which has one row per incident)</li>
<li>
<code><a href="../reference/read_casualties.html">read_casualties()</a></code> reads-in the casualty data (which has one row per person injured or killed)</li>
<li>
<code><a href="../reference/read_vehicles.html">read_vehicles()</a></code> reads-in the vehicles table, which contains information on the vehicles involved in the crashes (and has one row per vehicle)</li>
</ul>
</li>
<li><p><strong>Format</strong>: There are corresponding <code>format_*()</code> functions for each of the <code>read_*()</code> functions. These have been exported for convenience, as the two sets of functions are closely related, there is also a <code>format</code> parameter for the <code>read_*()</code> functions, which by default is <code>TRUE</code>, adds labels to the tables. The raw data provided by the DfT contains only integers. Running <code>read_*(..., format = TRUE)</code> converts these integer values to the corresponding character variables for each of the three tables. For example, <code>read_collisions(format = TRUE)</code> converts values in the <code>accident_severity</code> column from <code>1</code>, <code>2</code> and <code>3</code> to <code>Slight</code>, <code>Serious</code> and <code>Fatal</code> using <code>fromat_collisions()</code> function. To read-in raw data without formatting, set <code>format = FALSE</code>.</p></li>
</ul>
<p>Multiple functions (<code>read_*</code> and <code>format_*</code>) are needed for each step because of the structure of STATS19 data, which are divided into 3 tables:</p>
<ol style="list-style-type: decimal">
<li>“accident circumstances, with details about location, severity, weather, etc.;</li>
<li>casualties, referencing knowledge about the victims; and</li>
<li>vehicles, which contains more information about the vehicle type and manoeuvres, as well the some information about the driver.”</li>
</ol>
<p>Data files containing multiple years worth of data can be downloaded. Datasets since 1979 are broadly consistent, meaning that STATS19 data represents a rich historic geographic record of road casualties at a national level.</p>
</div>
<div class="section level2">
<h2 id="download-stats19-data">Download STATS19 data<a class="anchor" aria-label="anchor" href="#download-stats19-data"></a>
</h2>
<p><strong>stats19</strong> enables download of raw STATS19 data with <code>dl_*</code> functions. The following code chunk, for example, downloads and unzips a .zip file containing STATS19 data from 2022:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dl_stats19.html">dl_stats19</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span>, type <span class="op">=</span> <span class="st">"collision"</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Files identified: dft-road-casualty-statistics-collision-2022.csv</span></span>
<span><span class="co">#&gt;    https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-collision-2022.csv</span></span>
<span><span class="co">#&gt; Attempt downloading from: https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-collision-2022.csv</span></span>
<span><span class="co">#&gt; Data saved at /tmp/Rtmpmy5GdG/dft-road-casualty-statistics-collision-2022.csv</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Note that in the previous command, <code>ask = FALSE</code>, meaning you will not be asked. By default you are asked to confirm, before downloading large files. Currently, these files are downloaded to a default location of <code>tempdir</code> which is a platform independent “safe” but temporary location to download the data in. Once downloaded, they are unzipped under original DfT file names. The <code><a href="../reference/dl_stats19.html">dl_stats19()</a></code> function prints out the location and final file name(s) of unzipped files(s) as shown above.</p>
<p><code><a href="../reference/dl_stats19.html">dl_stats19()</a></code> takes three parameters. Supplying a <code>file_name</code> is interpreted to mean that the user is aware of what to download and the other two parameters will be ignored. You can also use <code>year</code> and <code>type</code> to “search” through the file names, which are stored in a lazy-loaded dataset called <code><a href="../reference/file_names.html">stats19::file_names</a></code>.</p>
<!-- In versions above `1.3.0`, function `dl_stats19()` behaves more like `get_stats19()`, that is parameter `type` is by default `accidents` and it can also download multiple years more efficiently. -->
<p>You can find out the names of files that can be downloaded with <code>names(stats19::file_names)</code>, an example of which is shown below:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">stats19</span><span class="fu">::</span><span class="va"><a href="../reference/file_names.html">file_names</a></span><span class="op">$</span><span class="va">DigitalBreathTestData2013.zip</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>To see how <code>file_names</code> was created, see <code><a href="../reference/file_names.html">?file_names</a></code>. Data files from other years can be selected interactively. Just providing a year, for example, presents the user with multiple options (from <code>file_names</code>), illustrated below:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dl_stats19.html">dl_stats19</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span></code></pre></div>
<pre><code>Multiple matches. Which do you want to download?

1: dft-road-casualty-statistics-casualty-2022.csv
2: dft-road-casualty-statistics-vehicle-2022.csv
3: dft-road-casualty-statistics-accident-2022.csv

Selection: 
Enter an item from the menu, or 0 to exit</code></pre>
<p>When R is running interactively, you can select which of the 3 matching files to download: those relating to vehicles, casualties or accidents in 2022.</p>
</div>
<div class="section level2">
<h2 id="read-stats19-data">Read STATS19 data<a class="anchor" aria-label="anchor" href="#read-stats19-data"></a>
</h2>
<p>In a similar approach to the download section before, we can read files downloaded using a <code>data_dir</code> location of the file and the <code>filename</code> to read. The code below will download the <code>dftRoadSafetyData_Accidents_2022.zip</code> file from the DfT servers and read its content. Files are saved by default in <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>, but this can be overridden to ensure permanent storage in a user-defined location.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crashes_2022_raw</span> <span class="op">=</span> <span class="fu"><a href="../reference/get_stats19.html">get_stats19</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span>, type <span class="op">=</span> <span class="st">"collision"</span>, format <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Files identified: dft-road-casualty-statistics-collision-2022.csv</span></span>
<span><span class="co">#&gt;    https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-collision-2022.csv</span></span>
<span><span class="co">#&gt; Data already exists in data_dir, not downloading</span></span>
<span><span class="co">#&gt; Reading in:</span></span>
<span><span class="co">#&gt; /tmp/Rtmpmy5GdG/dft-road-casualty-statistics-collision-2022.csv</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">106004</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">36</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>   (6): accident_index, accident_reference, date, local_authority_ons_dis...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (29): accident_year, location_easting_osgr, location_northing_osgr, lon...</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">time</span>  (1): time</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<p><strong>stats19</strong> imports data with <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_csv()</a></code> which results in a ‘tibble’ object: a data frame with more user-friendly printing and a few other features.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">crashes_2022_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">crashes_2022_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 106004     36</span></span></code></pre></div>
<p>There are three <code>read_*()</code> functions, corresponding to the three different classes of data provided by the DfT: 1. <code><a href="../reference/read_collisions.html">read_collisions()</a></code> 2. <code><a href="../reference/read_casualties.html">read_casualties()</a></code> 3. <code><a href="../reference/read_vehicles.html">read_vehicles()</a></code></p>
<p>In all cases, a default parameter <code>read_*(format = TRUE)</code> returns the data in formatted form, as described above. Data can also be imported in the form directly provided by the DfT by passing <code>format = FALSE</code>, and then subsequently formatted with additional <code>format_*()</code> functions, as described in a final section of this vignette. Each of these <code>read_*()</code> functions is now described in more detail.</p>
<div class="section level3">
<h3 id="crash-data">Crash data<a class="anchor" aria-label="anchor" href="#crash-data"></a>
</h3>
<p>After raw data files have been downloaded as described in the previous section, they can then be read-in as follows:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crashes_2022_raw</span> <span class="op">=</span> <span class="fu"><a href="../reference/read_collisions.html">read_collisions</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span>, format <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading in:</span></span>
<span><span class="co">#&gt; /tmp/Rtmpmy5GdG/dft-road-casualty-statistics-collision-2022.csv</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">106004</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">36</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>   (6): accident_index, accident_reference, date, local_authority_ons_dis...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (29): accident_year, location_easting_osgr, location_northing_osgr, lon...</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">time</span>  (1): time</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="va">crashes_2022</span> <span class="op">=</span> <span class="fu"><a href="../reference/format_collisions.html">format_collisions</a></span><span class="op">(</span><span class="va">crashes_2022_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; date and time columns present, creating formatted datetime column</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">crashes_2022_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 106004</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">crashes_2022_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 36</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">crashes_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 106004</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">crashes_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 37</span></span></code></pre></div>
<p>What just happened? We read-in data on all road crashes recorded by the police in 2022 across Great Britain. The dataset contains</p>
<p>32 columns (variables) for</p>
<p>129,982 crashes.</p>
<p>This work was done by <code>read_collisions(format = FALSE)</code>, which imported the “raw” STATS19 data without cleaning messy column names or re-categorising the outputs. <code><a href="../reference/format_collisions.html">format_collisions()</a></code> function automates the process of matching column names with variable names and labels in a <a href="https://data.dft.gov.uk/road-accidents-safety-data/variable%20lookup.xls" class="external-link"><code>.xls</code> file</a> provided by the DfT. This means <code>crashes_2022</code> is much more usable than <code>crashes_2022_raw</code>, as shown below, which shows some key variables in the messy and clean datasets:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crashes_2022_raw</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">18</span>, <span class="fl">23</span>, <span class="fl">25</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 106,004 × 4</span></span></span>
<span><span class="co">#&gt;    latitude first_road_class junction_control second_road_number</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     51.5                3                4                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     51.5                3                2                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     51.5                3                4                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     51.6                6               -<span style="color: #BB0000;">1</span>                 -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     51.6                3                4                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     51.5                3                4                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     51.4                6                4                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     51.6                3               -<span style="color: #BB0000;">1</span>                 -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     51.5                3                2                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     51.6                4                4                  0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 105,994 more rows</span></span></span>
<span><span class="va">crashes_2022</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">18</span>, <span class="fl">23</span>, <span class="fl">25</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 106,004 × 4</span></span></span>
<span><span class="co">#&gt;    latitude first_road_class junction_control             second_road_number    </span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     51.5 A                Give way or uncontrolled     first_road_class is C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     51.5 A                Auto traffic signal          first_road_class is C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     51.5 A                Give way or uncontrolled     first_road_class is C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     51.6 Unclassified     Data missing or out of range Unknown               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     51.6 A                Give way or uncontrolled     first_road_class is C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     51.5 A                Give way or uncontrolled     first_road_class is C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     51.4 Unclassified     Give way or uncontrolled     first_road_class is C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     51.6 A                Data missing or out of range Unknown               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     51.5 A                Auto traffic signal          first_road_class is C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     51.6 B                Give way or uncontrolled     first_road_class is C…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 105,994 more rows</span></span></span></code></pre></div>
<p>By default, <code>format = TRUE</code>, meaning that the two stages of <code>read_collisions(format = FALSE)</code> and <code><a href="../reference/format_collisions.html">format_collisions()</a></code> yield the same result as <code>read_collisions(format = TRUE)</code>. For the full list of columns, run <code>names(crashes_2022)</code>.</p>
<!-- This means `crashes_2022` is much more usable than `crashes_2022_raw`, as shown below, which shows three records and some key variables in the messy and clean datasets: -->
<p><strong>Note</strong>: As indicated above, the term collision is only used as directly provided by the DfT; “crashes” is a more appropriate term, hence we call our resultant datasets <code>crashes_*</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="format-stats19-data">Format STATS19 data<a class="anchor" aria-label="anchor" href="#format-stats19-data"></a>
</h2>
<p>It is also possible to import the “raw” data as provided by the DfT. A <a href="https://data.dft.gov.uk/road-accidents-safety-data/variable%20lookup.xls" class="external-link"><code>.xls</code> file</a> provided by the DfT defines the column names for the datasets provided. The packaged datasets <code>stats19_variables</code> and <code>stats19_schema</code> provide summary information about the contents of this data guide. These contain the full variable names in the guide (<code>stats19_variables</code>) and a complete look up table relating integer values to the <code>.csv</code> files provided by the DfT and their labels (<code>stats19_schema</code>). The first rows of each dataset are shown below:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stats19_variables</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 98 × 5</span></span></span>
<span><span class="co">#&gt;    table    variable                                    note   column_name type </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Accident accident_index                              uniqu… accident_i… char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Accident accident_index                              uniqu… accident_i… char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Accident accident_index                              uniqu… accident_i… char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Accident accident_reference                          In ye… accident_r… char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Accident accident_severity                           <span style="color: #BB0000;">NA</span>     accident_s… char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Accident accident_year                               <span style="color: #BB0000;">NA</span>     accident_y… nume…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Accident carriageway_hazards                         <span style="color: #BB0000;">NA</span>     carriagewa… char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Accident date                                        <span style="color: #BB0000;">NA</span>     date        char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Accident day_of_week                                 <span style="color: #BB0000;">NA</span>     day_of_week char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Accident did_police_officer_attend_scene_of_accident <span style="color: #BB0000;">NA</span>     did_police… char…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 88 more rows</span></span></span>
<span><span class="va">stats19_schema</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 914 × 7</span></span></span>
<span><span class="co">#&gt;    table    variable     code  label              note  variable_formatted type </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Accident police_force 1     Metropolitan Poli… <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Accident police_force 3     Cumbria            <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Accident police_force 4     Lancashire         <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Accident police_force 5     Merseyside         <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Accident police_force 6     Greater Manchester <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Accident police_force 7     Cheshire           <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Accident police_force 10    Northumbria        <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Accident police_force 11    Durham             <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Accident police_force 12    North Yorkshire    <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Accident police_force 13    West Yorkshire     <span style="color: #BB0000;">NA</span>    police_force       char…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 904 more rows</span></span></span></code></pre></div>
<p>The code that generated these small datasets can be found in their help pages (accessed with <code><a href="../reference/stats19_schema.html">?stats19_variables</a></code> and <code><a href="../reference/stats19_schema.html">?stats19_schema</a></code> respectively). <code>stats19_schema</code> is used internally to automate the process of formatting the downloaded <code>.csv</code> files. Column names are formatted by the function <code><a href="../reference/format_column_names.html">format_column_names()</a></code>, as illustrated below:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/format_column_names.html">format_column_names</a></span><span class="op">(</span><span class="va">stats19_variables</span><span class="op">$</span><span class="va">variable</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "accident_index" "accident_index" "accident_index"</span></span></code></pre></div>
<p>Previous approaches to data formatting <code>STATS19</code> data involved hard-coding results. This more automated approach to data cleaning is more consistent and fail-safe. The three functions: <code><a href="../reference/format_collisions.html">format_collisions()</a></code>, <code><a href="../reference/format_vehicles.html">format_vehicles()</a></code> and <code><a href="../reference/format_casualties.html">format_casualties()</a></code> do the data formatting on the respective data frames, as illustrated below:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crashes_2022</span> <span class="op">=</span> <span class="fu"><a href="../reference/format_collisions.html">format_collisions</a></span><span class="op">(</span><span class="va">crashes_2022_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; date and time columns present, creating formatted datetime column</span></span>
<span></span>
<span><span class="co"># vehicle data for 2022</span></span>
<span><span class="fu"><a href="../reference/dl_stats19.html">dl_stats19</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span>, type <span class="op">=</span> <span class="st">"vehicle"</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Files identified: dft-road-casualty-statistics-vehicle-2022.csv</span></span>
<span><span class="co">#&gt;    https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-vehicle-2022.csv</span></span>
<span><span class="co">#&gt; Attempt downloading from: https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-vehicle-2022.csv</span></span>
<span><span class="co">#&gt; Data saved at /tmp/Rtmpmy5GdG/dft-road-casualty-statistics-vehicle-2022.csv</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="va">vehicles_2022_raw</span> <span class="op">=</span> <span class="fu"><a href="../reference/read_vehicles.html">read_vehicles</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">193545</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">28</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (4): accident_index, accident_reference, generic_make_model, lsoa_of_dr...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (24): accident_year, vehicle_reference, vehicle_type, towing_and_articul...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="va">vehicles_2022</span> <span class="op">=</span> <span class="fu"><a href="../reference/format_vehicles.html">format_vehicles</a></span><span class="op">(</span><span class="va">vehicles_2022_raw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># casualties data for 2022</span></span>
<span><span class="fu"><a href="../reference/dl_stats19.html">dl_stats19</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span>, type <span class="op">=</span> <span class="st">"casualty"</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Files identified: dft-road-casualty-statistics-casualty-2022.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-casualty-2022.csv</span></span>
<span><span class="co">#&gt; Attempt downloading from: https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-casualty-2022.csv</span></span>
<span><span class="co">#&gt; Data saved at /tmp/Rtmpmy5GdG/dft-road-casualty-statistics-casualty-2022.csv</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="va">casualties_2022</span> <span class="op">=</span> <span class="fu"><a href="../reference/read_casualties.html">read_casualties</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">135480</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">19</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (3): accident_index, accident_reference, lsoa_of_casualty</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (16): accident_year, vehicle_reference, casualty_reference, casualty_cla...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<p>The package automates this two-step <code>read_*</code> and <code>format_*</code> process by defaulting in all cases to <code>data_year = read_*(year, format = TRUE)</code>. <code>read_*</code> functions return, by default, formatted data. The two-step process may nevertheless be important for reference to the official nomenclature and values as provided by the DfT.</p>
<p>A summary of the outputs for each of the three tables is shown below.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summarise_stats19</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>row.names <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">19</span><span class="op">)</span>,</span>
<span>    class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="kw">function</span><span class="op">(</span><span class="va">v</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    n_unique <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="kw">function</span><span class="op">(</span><span class="va">v</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    first_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="kw">function</span><span class="op">(</span><span class="va">v</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    most_common_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">x</span>, <span class="kw">function</span><span class="op">(</span><span class="va">v</span><span class="op">)</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">16</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">summarise_stats19</span><span class="op">(</span><span class="va">crashes_2022</span><span class="op">)</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">"Summary of formatted crash data."</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Summary of formatted crash data.</caption>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">class</th>
<th align="right">n_unique</th>
<th align="left">first_label</th>
<th align="left">most_common_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">accident_index</td>
<td align="left">character</td>
<td align="right">106004</td>
<td align="left">2022010352073</td>
<td align="left">2022010352073</td>
</tr>
<tr class="even">
<td align="left">accident_year</td>
<td align="left">numeric</td>
<td align="right">1</td>
<td align="left">2022</td>
<td align="left">2022</td>
</tr>
<tr class="odd">
<td align="left">accident_reference</td>
<td align="left">character</td>
<td align="right">106004</td>
<td align="left">010352073</td>
<td align="left">010352073</td>
</tr>
<tr class="even">
<td align="left">location_easting_os</td>
<td align="left">numeric</td>
<td align="right">85481</td>
<td align="left">525199</td>
<td align="left">533653</td>
</tr>
<tr class="odd">
<td align="left">location_northing_o</td>
<td align="left">numeric</td>
<td align="right">85711</td>
<td align="left">177928</td>
<td align="left">180088</td>
</tr>
<tr class="even">
<td align="left">longitude</td>
<td align="left">numeric</td>
<td align="right">103897</td>
<td align="left">-0.198224</td>
<td align="left">-3.099017</td>
</tr>
<tr class="odd">
<td align="left">latitude</td>
<td align="left">numeric</td>
<td align="right">102680</td>
<td align="left">51.486454</td>
<td align="left">51.442218</td>
</tr>
<tr class="even">
<td align="left">police_force</td>
<td align="left">character</td>
<td align="right">44</td>
<td align="left">Metropolitan Pol</td>
<td align="left">Metropolitan Pol</td>
</tr>
<tr class="odd">
<td align="left">accident_severity</td>
<td align="left">character</td>
<td align="right">3</td>
<td align="left">Slight</td>
<td align="left">Slight</td>
</tr>
<tr class="even">
<td align="left">number_of_vehicles</td>
<td align="left">numeric</td>
<td align="right">14</td>
<td align="left">2</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">number_of_casualtie</td>
<td align="left">numeric</td>
<td align="right">16</td>
<td align="left">1</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">date</td>
<td align="left">Date</td>
<td align="right">365</td>
<td align="left">2022-01-05</td>
<td align="left">2022-11-04</td>
</tr>
<tr class="odd">
<td align="left">day_of_week</td>
<td align="left">character</td>
<td align="right">7</td>
<td align="left">Wednesday</td>
<td align="left">Friday</td>
</tr>
<tr class="even">
<td align="left">time</td>
<td align="left">hms</td>
<td align="right">1440</td>
<td align="left">16:40:00</td>
<td align="left">17:00:00</td>
</tr>
<tr class="odd">
<td align="left">local_authority_dis</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">local_authority_ons</td>
<td align="left">character</td>
<td align="right">365</td>
<td align="left">E09000013</td>
<td align="left">E08000025</td>
</tr>
<tr class="odd">
<td align="left">local_authority_hig</td>
<td align="left">character</td>
<td align="right">207</td>
<td align="left">E09000013</td>
<td align="left">E10000016</td>
</tr>
<tr class="even">
<td align="left">first_road_class</td>
<td align="left">character</td>
<td align="right">6</td>
<td align="left">A</td>
<td align="left">A</td>
</tr>
<tr class="odd">
<td align="left">first_road_number</td>
<td align="left">character</td>
<td align="right">2</td>
<td align="left">NA</td>
<td align="left">first_road_class</td>
</tr>
<tr class="even">
<td align="left">road_type</td>
<td align="left">character</td>
<td align="right">6</td>
<td align="left">Single carriagew</td>
<td align="left">Single carriagew</td>
</tr>
<tr class="odd">
<td align="left">speed_limit</td>
<td align="left">numeric</td>
<td align="right">6</td>
<td align="left">30</td>
<td align="left">30</td>
</tr>
<tr class="even">
<td align="left">junction_detail</td>
<td align="left">character</td>
<td align="right">10</td>
<td align="left">Crossroads</td>
<td align="left">Not at junction</td>
</tr>
<tr class="odd">
<td align="left">junction_control</td>
<td align="left">character</td>
<td align="right">6</td>
<td align="left">Give way or unco</td>
<td align="left">Give way or unco</td>
</tr>
<tr class="even">
<td align="left">second_road_class</td>
<td align="left">character</td>
<td align="right">8</td>
<td align="left">Unclassified</td>
<td align="left">Not at junction</td>
</tr>
<tr class="odd">
<td align="left">second_road_number</td>
<td align="left">character</td>
<td align="right">3</td>
<td align="left">first_road_class</td>
<td align="left">first_road_class</td>
</tr>
<tr class="even">
<td align="left">pedestrian_crossing</td>
<td align="left">character</td>
<td align="right">5</td>
<td align="left">None within 50 m</td>
<td align="left">None within 50 m</td>
</tr>
<tr class="odd">
<td align="left">pedestrian_crossing</td>
<td align="left">character</td>
<td align="right">8</td>
<td align="left">No physical cros</td>
<td align="left">No physical cros</td>
</tr>
<tr class="even">
<td align="left">light_conditions</td>
<td align="left">character</td>
<td align="right">6</td>
<td align="left">Darkness - light</td>
<td align="left">Daylight</td>
</tr>
<tr class="odd">
<td align="left">weather_conditions</td>
<td align="left">character</td>
<td align="right">9</td>
<td align="left">Fine no high win</td>
<td align="left">Fine no high win</td>
</tr>
<tr class="even">
<td align="left">road_surface_condit</td>
<td align="left">character</td>
<td align="right">7</td>
<td align="left">Dry</td>
<td align="left">Dry</td>
</tr>
<tr class="odd">
<td align="left">special_conditions_</td>
<td align="left">character</td>
<td align="right">10</td>
<td align="left">None</td>
<td align="left">None</td>
</tr>
<tr class="even">
<td align="left">carriageway_hazards</td>
<td align="left">character</td>
<td align="right">8</td>
<td align="left">None</td>
<td align="left">None</td>
</tr>
<tr class="odd">
<td align="left">urban_or_rural_area</td>
<td align="left">character</td>
<td align="right">3</td>
<td align="left">Urban</td>
<td align="left">Urban</td>
</tr>
<tr class="even">
<td align="left">did_police_officer_</td>
<td align="left">character</td>
<td align="right">3</td>
<td align="left">Yes</td>
<td align="left">Yes</td>
</tr>
<tr class="odd">
<td align="left">trunk_road_flag</td>
<td align="left">character</td>
<td align="right">3</td>
<td align="left">Non-trunk</td>
<td align="left">Non-trunk</td>
</tr>
<tr class="even">
<td align="left">lsoa_of_accident_lo</td>
<td align="left">character</td>
<td align="right">26849</td>
<td align="left">E01001883</td>
<td align="left">-1</td>
</tr>
<tr class="odd">
<td align="left">datetime</td>
<td align="left">POSIXct</td>
<td align="right">79890</td>
<td align="left">2022-01-05 16:40</td>
<td align="left">2022-07-14 18:00</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">summarise_stats19</span><span class="op">(</span><span class="va">vehicles_2022</span><span class="op">)</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">"Summary of formatted vehicles data."</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Summary of formatted vehicles data.</caption>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">class</th>
<th align="right">n_unique</th>
<th align="left">first_label</th>
<th align="left">most_common_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">accident_index</td>
<td align="left">character</td>
<td align="right">106004</td>
<td align="left">2022010352073</td>
<td align="left">2022371220504</td>
</tr>
<tr class="even">
<td align="left">accident_year</td>
<td align="left">numeric</td>
<td align="right">1</td>
<td align="left">2022</td>
<td align="left">2022</td>
</tr>
<tr class="odd">
<td align="left">accident_reference</td>
<td align="left">character</td>
<td align="right">106004</td>
<td align="left">010352073</td>
<td align="left">371220504</td>
</tr>
<tr class="even">
<td align="left">vehicle_reference</td>
<td align="left">numeric</td>
<td align="right">24</td>
<td align="left">1</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">vehicle_type</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">towing_and_articula</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">vehicle_manoeuvre</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">vehicle_direction_f</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">vehicle_direction_t</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">vehicle_location_re</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">junction_location</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">skidding_and_overtu</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">hit_object_in_carri</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">vehicle_leaving_car</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">hit_object_off_carr</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">first_point_of_impa</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">vehicle_left_hand_d</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">journey_purpose_of_</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">sex_of_driver</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">age_of_driver</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">age_band_of_driver</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">engine_capacity_cc</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">propulsion_code</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">age_of_vehicle</td>
<td align="left">numeric</td>
<td align="right">86</td>
<td align="left">4</td>
<td align="left">-1</td>
</tr>
<tr class="odd">
<td align="left">generic_make_model</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">driver_imd_decile</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">driver_home_area_ty</td>
<td align="left">character</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">lsoa_of_driver</td>
<td align="left">character</td>
<td align="right">32838</td>
<td align="left">E01002687</td>
<td align="left">-1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">summarise_stats19</span><span class="op">(</span><span class="va">casualties_2022</span><span class="op">)</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">"Summary of formatted casualty data."</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Summary of formatted casualty data.</caption>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">class</th>
<th align="right">n_unique</th>
<th align="left">first_label</th>
<th align="left">most_common_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">accident_index</td>
<td align="left">character</td>
<td align="right">106004</td>
<td align="left">2022010352073</td>
<td align="left">2022010356595</td>
</tr>
<tr class="even">
<td align="left">accident_year</td>
<td align="left">numeric</td>
<td align="right">1</td>
<td align="left">2022</td>
<td align="left">2022</td>
</tr>
<tr class="odd">
<td align="left">accident_reference</td>
<td align="left">character</td>
<td align="right">106004</td>
<td align="left">010352073</td>
<td align="left">010356595</td>
</tr>
<tr class="even">
<td align="left">vehicle_reference</td>
<td align="left">numeric</td>
<td align="right">17</td>
<td align="left">2</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">casualty_reference</td>
<td align="left">numeric</td>
<td align="right">19</td>
<td align="left">1</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">casualty_class</td>
<td align="left">character</td>
<td align="right">3</td>
<td align="left">Driver or rider</td>
<td align="left">Driver or rider</td>
</tr>
<tr class="odd">
<td align="left">sex_of_casualty</td>
<td align="left">character</td>
<td align="right">4</td>
<td align="left">Male</td>
<td align="left">Male</td>
</tr>
<tr class="even">
<td align="left">age_of_casualty</td>
<td align="left">character</td>
<td align="right">2</td>
<td align="left">NA</td>
<td align="left">Data missing or</td>
</tr>
<tr class="odd">
<td align="left">age_band_of_casualt</td>
<td align="left">character</td>
<td align="right">12</td>
<td align="left">16 - 20</td>
<td align="left">26 - 35</td>
</tr>
<tr class="even">
<td align="left">casualty_severity</td>
<td align="left">character</td>
<td align="right">3</td>
<td align="left">Slight</td>
<td align="left">Slight</td>
</tr>
<tr class="odd">
<td align="left">pedestrian_location</td>
<td align="left">character</td>
<td align="right">12</td>
<td align="left">Not a Pedestrian</td>
<td align="left">Not a Pedestrian</td>
</tr>
<tr class="even">
<td align="left">pedestrian_movement</td>
<td align="left">character</td>
<td align="right">11</td>
<td align="left">Not a Pedestrian</td>
<td align="left">Not a Pedestrian</td>
</tr>
<tr class="odd">
<td align="left">car_passenger</td>
<td align="left">character</td>
<td align="right">5</td>
<td align="left">Not car passenge</td>
<td align="left">Not car passenge</td>
</tr>
<tr class="even">
<td align="left">bus_or_coach_passen</td>
<td align="left">character</td>
<td align="right">7</td>
<td align="left">Not a bus or coa</td>
<td align="left">Not a bus or coa</td>
</tr>
<tr class="odd">
<td align="left">pedestrian_road_mai</td>
<td align="left">character</td>
<td align="right">4</td>
<td align="left">No / Not applica</td>
<td align="left">No / Not applica</td>
</tr>
<tr class="even">
<td align="left">casualty_type</td>
<td align="left">character</td>
<td align="right">23</td>
<td align="left">Motorcycle 125cc</td>
<td align="left">Car occupant</td>
</tr>
<tr class="odd">
<td align="left">casualty_home_area_</td>
<td align="left">character</td>
<td align="right">4</td>
<td align="left">Urban area</td>
<td align="left">Urban area</td>
</tr>
<tr class="even">
<td align="left">casualty_imd_decile</td>
<td align="left">character</td>
<td align="right">11</td>
<td align="left">Most deprived 10</td>
<td align="left">More deprived 10</td>
</tr>
<tr class="odd">
<td align="left">lsoa_of_casualty</td>
<td align="left">character</td>
<td align="right">31105</td>
<td align="left">E01001364</td>
<td align="left">-1</td>
</tr>
</tbody>
</table>
<p>For testing and other purposes, a sample from the accidents table is provided in the package. A few columns from the two-row sample is shown below:</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="13%">
<col width="39%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="left">accident_severity</th>
<th align="right">speed_limit</th>
<th align="left">pedestrian_crossing_human_control</th>
<th align="left">light_conditions</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Serious</td>
<td align="right">30</td>
<td align="left">Control by other authorised person</td>
<td align="left">Daylight</td>
</tr>
<tr class="even">
<td align="left">Slight</td>
<td align="right">30</td>
<td align="left">None within 50 metres</td>
<td align="left">Darkness - no lighting</td>
</tr>
<tr class="odd">
<td align="left">Slight</td>
<td align="right">30</td>
<td align="left">None within 50 metres</td>
<td align="left">Daylight</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="casualties-data">Casualties data<a class="anchor" aria-label="anchor" href="#casualties-data"></a>
</h2>
<p>As with <code>crashes_2022</code>, casualty data for 2022 can be downloaded, read-in and formatted as follows:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dl_stats19.html">dl_stats19</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span>, type <span class="op">=</span> <span class="st">"casualty"</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Files identified: dft-road-casualty-statistics-casualty-2022.csv</span></span>
<span><span class="co">#&gt;    https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-casualty-2022.csv</span></span>
<span><span class="co">#&gt; Data already exists in data_dir, not downloading</span></span>
<span><span class="va">casualties_2022</span> <span class="op">=</span> <span class="fu"><a href="../reference/read_casualties.html">read_casualties</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">135480</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">19</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (3): accident_index, accident_reference, lsoa_of_casualty</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (16): accident_year, vehicle_reference, casualty_reference, casualty_cla...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">casualties_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 135480</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">casualties_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 19</span></span></code></pre></div>
<p>The results show that there were</p>
<p>170,993 casualties reported by the police in the STATS19 dataset in 2022, and</p>
<p>16 columns (variables). Values for a sample of these columns are shown below:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">casualties_2022</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">14</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 135,480 × 4</span></span></span>
<span><span class="co">#&gt;    vehicle_reference casualty_reference casualty_class  bus_or_coach_passenger  </span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                 2                  1 Driver or rider Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                 1                  1 Driver or rider Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                 1                  1 Driver or rider Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                 1                  1 Driver or rider Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                 1                  2 Passenger       Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                 1                  1 Driver or rider Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                 2                  2 Driver or rider Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                 3                  3 Driver or rider Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                 1                  1 Driver or rider Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                 1                  2 Passenger       Not a bus or coach pass…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 135,470 more rows</span></span></span></code></pre></div>
<p>The full list of column names in the <code>casualties</code> dataset is:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">casualties_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "accident_index"                     "accident_year"                     </span></span>
<span><span class="co">#&gt;  [3] "accident_reference"                 "vehicle_reference"                 </span></span>
<span><span class="co">#&gt;  [5] "casualty_reference"                 "casualty_class"                    </span></span>
<span><span class="co">#&gt;  [7] "sex_of_casualty"                    "age_of_casualty"                   </span></span>
<span><span class="co">#&gt;  [9] "age_band_of_casualty"               "casualty_severity"                 </span></span>
<span><span class="co">#&gt; [11] "pedestrian_location"                "pedestrian_movement"               </span></span>
<span><span class="co">#&gt; [13] "car_passenger"                      "bus_or_coach_passenger"            </span></span>
<span><span class="co">#&gt; [15] "pedestrian_road_maintenance_worker" "casualty_type"                     </span></span>
<span><span class="co">#&gt; [17] "casualty_home_area_type"            "casualty_imd_decile"               </span></span>
<span><span class="co">#&gt; [19] "lsoa_of_casualty"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="vehicles-data">Vehicles data<a class="anchor" aria-label="anchor" href="#vehicles-data"></a>
</h2>
<p>Data for vehicles involved in crashes in 2022 can be downloaded, read-in and formatted as follows:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dl_stats19.html">dl_stats19</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span>, type <span class="op">=</span> <span class="st">"vehicle"</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Files identified: dft-road-casualty-statistics-vehicle-2022.csv</span></span>
<span><span class="co">#&gt;    https://data.dft.gov.uk/road-accidents-safety-data/dft-road-casualty-statistics-vehicle-2022.csv</span></span>
<span><span class="co">#&gt; Data already exists in data_dir, not downloading</span></span>
<span><span class="va">vehicles_2022</span> <span class="op">=</span> <span class="fu"><a href="../reference/read_vehicles.html">read_vehicles</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">193545</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">28</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (4): accident_index, accident_reference, generic_make_model, lsoa_of_dr...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (24): accident_year, vehicle_reference, vehicle_type, towing_and_articul...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">vehicles_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 193545</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">vehicles_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 28</span></span></code></pre></div>
<p>The results show that there were</p>
<p>238,926 vehicles involved in crashes reported by the police in the STATS19 dataset in 2022, with</p>
<p>23 columns (variables). Values for a sample of these columns are shown below:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vehicles_2022</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">14</span><span class="op">:</span><span class="fl">16</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 193,545 × 4</span></span></span>
<span><span class="co">#&gt;    accident_reference vehicle_leaving_carriageway hit_object_off_carriageway </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 010352073          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 010352073          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 010352573          Nearside                    Road sign or traffic signal</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 010352573          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 010352575          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 010352575          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 010352578          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 010352578          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 010352580          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 010352580          Did not leave carriageway   None                       </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 193,535 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: first_point_of_impact &lt;chr&gt;</span></span></span></code></pre></div>
<p>The full list of column names in the <code>vehicles</code> dataset is:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vehicles_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "accident_index"                   "accident_year"                   </span></span>
<span><span class="co">#&gt;  [3] "accident_reference"               "vehicle_reference"               </span></span>
<span><span class="co">#&gt;  [5] "vehicle_type"                     "towing_and_articulation"         </span></span>
<span><span class="co">#&gt;  [7] "vehicle_manoeuvre"                "vehicle_direction_from"          </span></span>
<span><span class="co">#&gt;  [9] "vehicle_direction_to"             "vehicle_location_restricted_lane"</span></span>
<span><span class="co">#&gt; [11] "junction_location"                "skidding_and_overturning"        </span></span>
<span><span class="co">#&gt; [13] "hit_object_in_carriageway"        "vehicle_leaving_carriageway"     </span></span>
<span><span class="co">#&gt; [15] "hit_object_off_carriageway"       "first_point_of_impact"           </span></span>
<span><span class="co">#&gt; [17] "vehicle_left_hand_drive"          "journey_purpose_of_driver"       </span></span>
<span><span class="co">#&gt; [19] "sex_of_driver"                    "age_of_driver"                   </span></span>
<span><span class="co">#&gt; [21] "age_band_of_driver"               "engine_capacity_cc"              </span></span>
<span><span class="co">#&gt; [23] "propulsion_code"                  "age_of_vehicle"                  </span></span>
<span><span class="co">#&gt; [25] "generic_make_model"               "driver_imd_decile"               </span></span>
<span><span class="co">#&gt; [27] "driver_home_area_type"            "lsoa_of_driver"</span></span></code></pre></div>
<!-- More data can be read-in as follows: -->
</div>
<div class="section level2">
<h2 id="creating-geographic-crash-data">Creating geographic crash data<a class="anchor" aria-label="anchor" href="#creating-geographic-crash-data"></a>
</h2>
<p>An important feature of STATS19 data is that the collision table contains geographic coordinates. These are provided at ~10m resolution in the UK’s official coordinate reference system (the Ordnance Survey National Grid, EPSG code 27700). <strong>stats19</strong> converts the non-geographic tables created by <code><a href="../reference/format_collisions.html">format_collisions()</a></code> into the geographic data form of the <a href="https://cran.r-project.org/package=sf" class="external-link"><code>sf</code> package</a> with the function <code><a href="../reference/format_sf.html">format_sf()</a></code> as follows:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crashes_sf</span> <span class="op">=</span> <span class="fu"><a href="../reference/format_sf.html">format_sf</a></span><span class="op">(</span><span class="va">crashes_2022</span><span class="op">)</span></span>
<span><span class="co">#&gt; 22 rows removed with no coordinates</span></span></code></pre></div>
<p>The note arises because <code>NA</code> values are not permitted in <code>sf</code> coordinates, and so rows containing no coordinates are automatically removed. Having the data in a standard geographic form allows various geographic operations to be performed on it. Spatial operations, such as spatial subsetting and spatial aggregation, can be performed, to show the relationship between STATS19 data and other geographic objects, such as roads, schools and administrative zones.</p>
<p>An example of an administrative zone dataset of relevance to STATS19 data is the boundaries of police forces in England, which is provided in the packaged dataset <code>police_boundaries</code>. The following code chunk demonstrates the kind of spatial operations that can be performed on geographic STATS19 data, by counting and plotting the number of fatalities per police force:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="va">crashes_sf</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">accident_severity</span> <span class="op">==</span> <span class="st">"Fatal"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>n_fatalities <span class="op">=</span> <span class="va">accident_index</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span>by <span class="op">=</span> <span class="va">police_boundaries</span>, FUN <span class="op">=</span> <span class="va">length</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span></code></pre></div>
<p><img src="stats19_files/figure-html/nfatalities-1.png" width="100%"></p>
<p>Of course, one should not draw conclusions from such analyses without care. In this case, denominators are needed to infer anything about road safety in any of the police regions. After suitable denominators have been included, performance metrics such as ‘health risk’ (fatalities per 100,000 people), ‘traffic risk’ (fatalities per billion km, f/bkm) and ‘exposure risk’ (fatalities per million hours, f/mh) can be calculated <span class="citation">(Feleke et al. 2018; Elvik et al. 2009)</span>.</p>
<p>The following code chunk, for example, returns all crashes within the jurisdiction of <a href="https://en.wikipedia.org/wiki/West_Yorkshire_Police" class="external-link">West Yorkshire Police</a>:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">west_yorkshire</span> <span class="op">=</span></span>
<span>  <span class="va">police_boundaries</span><span class="op">[</span><span class="va">police_boundaries</span><span class="op">$</span><span class="va">pfa16nm</span> <span class="op">==</span> <span class="st">"West Yorkshire"</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span>
<span><span class="co">#&gt; old-style crs object detected; please recreate object with a recent sf::st_crs()</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crashes_wy</span> <span class="op">=</span> <span class="va">crashes_sf</span><span class="op">[</span><span class="va">west_yorkshire</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">crashes_sf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 105982</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">crashes_wy</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4400</span></span></code></pre></div>
<p>This subsetting has selected the</p>
<p>4,371 crashes which occurred in West Yorkshire.</p>
</div>
<div class="section level2">
<h2 id="joining-tables">Joining tables<a class="anchor" aria-label="anchor" href="#joining-tables"></a>
</h2>
<p>The three main tables we have just read-in can be joined by shared key variables. This is demonstrated in the code chunk below, which subsets all casualties that took place in West Yorkshire, and counts the number of casualties by severity for each crash:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">sel</span> <span class="op">=</span> <span class="va">casualties_2022</span><span class="op">$</span><span class="va">accident_index</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">crashes_wy</span><span class="op">$</span><span class="va">accident_index</span></span>
<span><span class="va">casualties_wy</span> <span class="op">=</span> <span class="va">casualties_2022</span><span class="op">[</span><span class="va">sel</span>, <span class="op">]</span></span>
<span><span class="va">cas_types</span> <span class="op">=</span> <span class="va">casualties_wy</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">accident_index</span>, <span class="va">casualty_type</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">accident_index</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    Total <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    walking <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">casualty_type</span> <span class="op">==</span> <span class="st">"Pedestrian"</span><span class="op">)</span>,</span>
<span>    cycling <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">casualty_type</span> <span class="op">==</span> <span class="st">"Cyclist"</span><span class="op">)</span>,</span>
<span>    passenger <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">casualty_type</span> <span class="op">==</span> <span class="st">"Car occupant"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> </span>
<span><span class="va">cj</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">crashes_wy</span>, <span class="va">cas_types</span><span class="op">)</span></span></code></pre></div>
<p>What just happened? We found the subset of casualties that took place in West Yorkshire with reference to the <code>accident_index</code> variable. Then we used the <strong>dplyr</strong> function <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code>, to find the number of people who were in a car, cycling, and walking when they were injured. This new casualty dataset is joined onto the <code>crashes_wy</code> dataset. The result is a spatial (<code>sf</code>) data frame of crashes in West Yorkshire, with columns counting how many road users of different types were hurt. The joined data has additional variables:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cj</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">crashes_wy</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Total"     "walking"   "cycling"   "passenger"</span></span></code></pre></div>
<p>As a simple spatial plot, we can map all the crashes that have happened in West Yorkshire in 2022, with the colour related to the total number of people hurt in each crash. Placing this plot next to a map of West Yorkshire provides context:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">cj</span><span class="op">[</span><span class="va">cj</span><span class="op">$</span><span class="va">cycling</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="st">"speed_limit"</span>, <span class="op">]</span>,</span>
<span>  cex <span class="op">=</span> <span class="va">cj</span><span class="op">$</span><span class="va">Total</span><span class="op">[</span><span class="va">cj</span><span class="op">$</span><span class="va">cycling</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span> <span class="op">/</span> <span class="fl">3</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Speed limit (cycling)"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">cj</span><span class="op">[</span><span class="va">cj</span><span class="op">$</span><span class="va">passenger</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="st">"speed_limit"</span>, <span class="op">]</span>,</span>
<span>  cex <span class="op">=</span> <span class="va">cj</span><span class="op">$</span><span class="va">Total</span><span class="op">[</span><span class="va">cj</span><span class="op">$</span><span class="va">passenger</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span> <span class="op">/</span> <span class="fl">3</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Speed limit (passenger)"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="stats19_files/figure-html/unnamed-chunk-8-1.png" width="90%"><img src="stats19_files/figure-html/unnamed-chunk-8-2.png" width="90%"></p>
<p>The spatial distribution of crashes in West Yorkshire clearly relates to the region’s geography. Car crashes tend to happen on fast roads, including busy Motorway roads, displayed in yellow above. Cycling is as an urban activity, and the most bike crashes can be found in near Leeds city centre, which has a comparatively high level of cycling (compared with the low baseline of 3%). This can be seen by comparing the previous map with an overview of the area, from an academic paper on the social, spatial and temporal distribution of bike crashes <span class="citation">(Lovelace, Roberts, and Kellar 2016)</span>:</p>
<p><img src="wy-overview.jpg" width="100%"></p>
<p>In addition to the <code>Total</code> number of people hurt/killed, <code>cj</code> contains a column for each type of casualty (cyclist, car occupant, etc.), and a number corresponding to the number of each type hurt in each crash. It also contains the <code>geometry</code> column from <code>crashes_sf</code>. In other words, joins allow the casualties and vehicles tables to be geo-referenced. We can then explore the spatial distribution of different casualty types. The following figure, for example, shows the spatial distribution of pedestrians and car passengers hurt in car crashes across West Yorkshire in 2022:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">crashes_types</span> <span class="op">=</span> <span class="va">cj</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">accident_severity</span> <span class="op">!=</span> <span class="st">"Slight"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">walking</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"Walking"</span>,</span>
<span>    <span class="va">cycling</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"Cycling"</span>,</span>
<span>    <span class="va">passenger</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"Passenger"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Other"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">crashes_types</span><span class="op">$</span><span class="va">speed_limit</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  20  30  40  50  60  70 </span></span>
<span><span class="co">#&gt; 100 848 155  30  75  63</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">crashes_types</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">Total</span>, colour <span class="op">=</span> <span class="va">speed_limit</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>show.legend <span class="op">=</span> <span class="st">"point"</span>, alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">accident_severity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html" class="external-link">scale_size</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">12</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="st">"3+"</span>, <span class="fl">12</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_color_gradientn</a></span><span class="op">(</span>colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"yellow"</span>, <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="stats19_files/figure-html/sfplot-1.png" alt="Spatial distribution of serious and fatal crashes in West Yorkshire, for cycling, walking, being a car passenger and other modes of travel. Colour is related to the speed limit where the crash happened (red is faster) and size is proportional to the total number of people hurt in each crash (legend not shown)." width="100%"><p class="caption">
Spatial distribution of serious and fatal crashes in West Yorkshire, for cycling, walking, being a car passenger and other modes of travel. Colour is related to the speed limit where the crash happened (red is faster) and size is proportional to the total number of people hurt in each crash (legend not shown).
</p>
</div>
<p>It is clear that different types of road users tend to get hurt in different places. Car occupant casualties (labelled ‘passengers’ in the map above), for example, are comparatively common on the outskirts of cities such as Leeds, where speed limits tend to be higher and where there are comparatively higher volumes of motor traffic. Casualties to people on foot tend to happen in the city centres. That is not to say that cities centres are more dangerous per unit distance (typically casualties per billion kilometres, bkm, is the unit used) walked: there is more walking in city centres (you need a denominator to estimate risk).</p>
<p>To drill down further, we can find the spatial distribution of all pedestrian casualties, broken-down by seriousness of casualty, and light conditions. This can be done with <strong>tidyvers</strong> functions follows:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">cj</span><span class="op">$</span><span class="va">light_conditions</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Darkness - lighting unknown       Darkness - lights lit </span></span>
<span><span class="co">#&gt;                          81                        1136 </span></span>
<span><span class="co">#&gt;     Darkness - lights unlit      Darkness - no lighting </span></span>
<span><span class="co">#&gt;                          40                         117 </span></span>
<span><span class="co">#&gt;                    Daylight </span></span>
<span><span class="co">#&gt;                        3026</span></span>
<span><span class="va">cj</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">walking</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>light <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">light_conditions</span> <span class="op">==</span> <span class="st">"Daylight"</span> <span class="op">~</span> <span class="st">"Daylight"</span>,</span>
<span>    <span class="va">light_conditions</span> <span class="op">==</span> <span class="st">"Darkness - lights lit"</span> <span class="op">~</span> <span class="st">"Lit"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Other/Unlit"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">speed_limit</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">light</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">accident_severity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_continuous.html" class="external-link">scale_color_continuous</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"blue"</span>, high <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="stats19_files/figure-html/ggplot-ped-severity-1.png" width="100%"></p>
<!-- These figures show the issue of pedestrian casualties in Leeds and Bradford city centres, which both have busy roads going through or around popular shopping and other destinations. -->
</div>
<div class="section level2">
<h2 id="time-series-analysis">Time series analysis<a class="anchor" aria-label="anchor" href="#time-series-analysis"></a>
</h2>
<p>We can also explore seasonal and daily trends in crashes by aggregating crashes by day of the year:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crashes_dates</span> <span class="op">=</span> <span class="va">cj</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_set_geometry</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    walking <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">walking</span><span class="op">)</span>,</span>
<span>    cycling <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">cycling</span><span class="op">)</span>,</span>
<span>    passenger <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">passenger</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="va">mode</span>, <span class="va">casualties</span>, <span class="op">-</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">crashes_dates</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">casualties</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">mode</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">"loess"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Casualties per day"</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="stats19_files/figure-html/crash-date-plot-1.png" width="100%"></p>
<p>Different types of crashes also tend to happen at different times of day. This is illustrated in the plot below, which shows the times of day when people who were travelling by different modes were most commonly injured.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">crash_times</span> <span class="op">=</span> <span class="va">cj</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_set_geometry</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>hour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html" class="external-link">str_sub</a></span><span class="op">(</span><span class="va">time</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    walking <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">walking</span><span class="op">)</span>,</span>
<span>    cycling <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">cycling</span><span class="op">)</span>,</span>
<span>    passenger <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">passenger</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="va">mode</span>, <span class="va">casualties</span>, <span class="op">-</span><span class="va">hour</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">crash_times</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">hour</span>, <span class="va">casualties</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">mode</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="stats19_files/figure-html/crash-time-plot-1.png" width="100%"></p>
<p>Note that bike crashes tend to have distinct morning and afternoon peaks, in-line with previous research <span class="citation">(Lovelace, Roberts, and Kellar 2016)</span>. A disproportionate number of car crashes appear to happen in the afternoon.</p>
</div>
<div class="section level2">
<h2 id="further-work">Further work<a class="anchor" aria-label="anchor" href="#further-work"></a>
</h2>
<p>There is much potential to extend the package beyond downloading, reading and formatting STATS19 data. The greatest potential is to provide functions that will help with analysis of STATS19 data, to help with road safety research. Much academic research has been done using the data, a few examples of which are highlighted below to demonstrate the wide potential for further work.</p>
<ul>
<li>Research exploring the effectiveness of road safety policies such as speed limits. An example in this area is this <a href="https://pubmed.ncbi.nlm.nih.gov/20007666/" class="external-link">paper on 20 mph zones</a> who found that areas with 20mph speed limits were safer. This raises the question: can the same result be repeated using reproducible methods? Does the finding hold for more recent 20 mph zones? Is the recent finding of the Department for Transport’s (<a href="https://www.gov.uk/government/publications/20-mph-speed-limits-on-roads" class="external-link">2018</a>) research, that 20 mph zones alone do not reduce crash rates, supported by reproducible analysis? What are the factors that make speed limits more or less effective <span class="citation">(see <strong>sarkar_street_2018?</strong> for example)</span>?</li>
<li>Research into weather as a contributing factor to road traffic casualties <span class="citation">(e.g. Edwards 1998)</span>. This raises the question: could matching crash data from the STATS19 data with historic weather data from other R packages help advance knowledge in this area?</li>
<li>Assessment of crash rates normalised by estimated exposure rates (risk). An example of this type of research by an author of the package found substantial spatial variation in the number of cyclist casualties across West Yorkshire <span class="citation">(Lovelace, Roberts, and Kellar 2016)</span>. This raises the questions: are similar spatial differences found in other regions? What are the factors leading to relatively high and low rates of different types of crash?</li>
</ul>
<p>The broader point is that the <strong>stats19</strong> package could help road safety research, by making open access data on road crashes more accessible to researchers worldwide. By easing the data download and cleaning stages of research, it could also encourage reproducible analysis in the field.</p>
<p>There is great potential to add value to and gain insight from the data by joining the datasets with open data, for example from the Consumer Data Research Centre (<a href="https://www.cdrc.ac.uk/" class="external-link">CDRC</a>, which funded this research), OpenStreetMap and the UK’s Ordnance Survey. If you have any suggestions on priorities for these future directions of (hopefully safe) travel, please get in touch on at <a href="https://github.com/ITSLeeds/stats19/issues" class="external-link">github.com/ITSLeeds/stats19/issues</a>.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-edwards_relationship_1998" class="csl-entry">
Edwards, Julia B. 1998. <span>“The <span>Relationship Between Road Accident Severity</span> and <span>Recorded Weather</span>.”</span> <em>Journal of Safety Research</em> 29 (4): 249–62. <a href="https://doi.org/10.1016/S0022-4375(98)00051-6" class="external-link">https://doi.org/10.1016/S0022-4375(98)00051-6</a>.
</div>
<div id="ref-elvik_handbook_2009" class="csl-entry">
Elvik, Rune, Truls Vaa, Alena Erke, and Michael Sorensen. 2009. <em>The Handbook of Road Safety Measures</em>. <span>Emerald Group Publishing</span>.
</div>
<div id="ref-feleke_comparative_2018" class="csl-entry">
Feleke, Robel, Shaun Scholes, Malcolm Wardlaw, and Jennifer S. Mindell. 2018. <span>“Comparative Fatality Risk for Different Travel Modes by Age, Sex, and Deprivation.”</span> <em>Journal of Transport &amp; Health</em> 8 (March): 307–20. <a href="https://doi.org/10.1016/j.jth.2017.08.007" class="external-link">https://doi.org/10.1016/j.jth.2017.08.007</a>.
</div>
<div id="ref-lovelace_who_2016" class="csl-entry">
Lovelace, Robin, Hannah Roberts, and Ian Kellar. 2016. <span>“Who, Where, When: The Demographic and Geographic Distribution of Bicycle Crashes in <span>West Yorkshire</span>.”</span> <em>Transportation Research Part F: Traffic Psychology and Behaviour</em>, Bicycling and bicycle safety, 41, Part B. <a href="https://doi.org/10.1016/j.trf.2015.02.010" class="external-link">https://doi.org/10.1016/j.trf.2015.02.010</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
